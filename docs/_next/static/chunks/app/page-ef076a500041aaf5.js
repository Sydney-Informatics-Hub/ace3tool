(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{21440:function(){},47464:function(e,o,r){Promise.resolve().then(r.bind(r,50274))},50274:function(e,o,r){"use strict";r.d(o,{default:function(){return er}});var s=r(56104),a=r(66257),l=r(39580),p=r(44692);let c={attention:{max:18,label:"Attention"},memory:{max:26,label:"Memory"},fluency:{max:14,label:"Fluency"},language:{max:26,label:"Language"},visuospatial:{max:16,label:"Visuospatial"}},t=e=>"The score for ".concat(e.label," should be less than ").concat(e.max),d=(0,p.Ry)({attention:(0,p.Rx)().label(c.attention.label).integer().min(0).max(c.attention.max,t).typeError("Please enter a number").required(),memory:(0,p.Rx)().label(c.memory.label).integer().min(0).max(c.memory.max,t).typeError("Please enter a number").required(),fluency:(0,p.Rx)().label(c.fluency.label).integer().min(0).max(c.fluency.max,t).typeError("Please enter a number").required(),language:(0,p.Rx)().label(c.language.label).integer().min(0).max(c.language.max,t).typeError("Please enter a number").required(),visuospatial:(0,p.Rx)().label(c.visuospatial.label).integer().min(0).max(c.visuospatial.max,t).typeError("Please enter a number").required()}),n=["attention","memory","fluency","language","visuospatial"];var i=r(16864),u=r(83847);function m(e){let[o,r]=(0,i.useState)(!1),[s,a]=(0,i.useState)(0);return(0,i.useEffect)(()=>{d.validate(e).then(e=>{let o=Object.values(e).reduce((e,o)=>e+o,0);r(!0),a(o)}).catch(e=>{r(!1)})},[e]),{valid:o,total:s}}function _(e){let{width:o,height:r}=e;return(0,s.jsxs)("div",{role:"status",className:"w-".concat(o,"px h-").concat(r,"px p-4 animate-pulse md:p-6"),children:[(0,s.jsx)("div",{className:"h-2.5 bg-gray-200 rounded-full  w-1/2 mb-2.5"}),(0,s.jsx)("div",{className:"w-3/4 h-2 mb-10 bg-gray-200 rounded-full "}),(0,s.jsxs)("div",{className:"h-full flex items-baseline mt-4",children:[(0,s.jsx)("div",{className:"w-full bg-gray-200 rounded-t-lg h-3/4 "}),(0,s.jsx)("div",{className:"w-full h-1/2 ms-6 bg-gray-200 rounded-t-lg "}),(0,s.jsx)("div",{className:"w-full bg-gray-200 rounded-t-lg h-3/4 ms-6 "}),(0,s.jsx)("div",{className:"w-full h-4/5 ms-6 bg-gray-200 rounded-t-lg "}),(0,s.jsx)("div",{className:"w-full bg-gray-200 rounded-t-lg h-5/6 ms-6 "}),(0,s.jsx)("div",{className:"w-full bg-gray-200 rounded-t-lg h-3/4 ms-6 "}),(0,s.jsx)("div",{className:"w-full bg-gray-200 rounded-t-lg h-5/6 ms-6 "})]}),(0,s.jsx)("span",{className:"sr-only",children:"Loading..."})]})}let g={orange500:"#f97316",red600:"#dc2626",indigo600:"#4f46e5",indigo800:"#3730a3"},h=[{label:"Moderate risk",min:0,max:82,width:82},{label:"Mild risk",min:82,max:88,width:6},{label:"Within normal limits",min:88,max:100,width:12}];function x(e){let o=(0,i.useRef)(null),{scores:r}=e,{valid:a,total:l}=m(r);return(0,i.useEffect)(()=>{var e;let r=u.g({title:a?"Total score: ".concat(l):"Total score",width:500,height:150,x:{grid:!0,label:"ACE-III total score"},color:{type:"categorical",scheme:"RdYlGn",range:[0,1,2],domain:["Moderate risk","Mild risk","Within normal limits"],legend:!0},marks:[u.Me({ticks:[]}),u.JA(h,{x1:"min",x2:"max",y1:0,y2:10,fillOpacity:.7,fill:"label"}),a?u.zD([{score:l}],{x:"score",stroke:g.indigo600,marker:"circle-stroke",strokeWidth:3}):null]});return null==o||null===(e=o.current)||void 0===e||e.replaceChildren(r),()=>r.remove()},[a,l]),(0,s.jsx)("div",{ref:o,children:(0,s.jsx)(_,{width:500,height:150})})}var f=r(44262);function y(e){let{label:o,name:r,...l}=e,{register:p,getFieldState:c}=(0,a.Gc)(),t=c(r),d=t.isDirty?t.invalid?"failure":"success":void 0;return(0,s.jsxs)("div",{children:[(0,s.jsx)(f.__,{htmlFor:r,children:o}),(0,s.jsx)(f.oi,{type:"number",color:d,...p(r),...l}),t.error&&(0,s.jsx)("span",{className:"text-sm text-red-400",children:t.error.message})]})}function v(e){let{form:o}=e,{handleSubmit:r}=o;return(0,s.jsxs)(f.Zb,{className:"max-w-xl",id:"score-entry",children:[(0,s.jsx)("h2",{className:"text-2xl font-bold text-indigo-700",children:"Enter ACE-III scale scores"}),(0,s.jsx)(a.RV,{...o,children:(0,s.jsxs)("form",{className:"flex flex-col max-w-lg gap-4 my-2",onSubmit:r(e=>console.log(e)),children:[(0,s.jsx)(y,{label:"Attention",name:"attention"}),(0,s.jsx)(y,{label:"Memory",name:"memory"}),(0,s.jsx)(y,{label:"Fluency",name:"fluency"}),(0,s.jsx)(y,{label:"Language",name:"language"}),(0,s.jsx)(y,{label:"Visuospatial",name:"visuospatial"})]})})]})}function b(e){let[o,r]=(0,i.useState)(!1),[s,a]=(0,i.useState)(void 0);return(0,i.useEffect)(()=>{d.validate(e).then(e=>{r(!0),a(e)}).catch(e=>{r(!1)})},[e]),{valid:o,scores:s}}var T=r(76237),k=r(24390),j=r(42732);function w(){let e=(0,T._)(["<stop offset=",'% stop-color="','">']);return w=function(){return e},e}function M(){let e=(0,T._)(["<defs>\n          <linearGradient id=",">\n            ","\n          </linearGradient>\n        </defs>"]);return M=function(){return e},e}let N=function(e){let o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"gradient",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:j.uX,s=100/e,a=[...Array(e+1).keys()].map(e=>e*s).map(e=>k.Y.fragment(w(),e,r(e/100)));return()=>(0,k.Y)(M(),"".concat(o),a)};function L(e){let o=(0,i.useRef)(null),{model:r}=e,{scores:a}=b(e.scores),l=a?(1-r.predict(a))*100:void 0;return(0,i.useEffect)(()=>{var e;let s=a?r.confidence_interval(a):void 0,p=void 0!==s?{upper:(1-s[0])*100,lower:(1-s[1])*100}:void 0,c=u.g({title:l?"Predicted risk of dementia (subdomain model): ".concat(Math.round(l),"%"):"Predicted risk of dementia (subdomain model)",width:500,height:150,x:{grid:!0,label:"Risk (%)",domain:[0,100],reverse:!0},y:{domain:[0,10]},color:{type:"sequential",scheme:"magma",domain:[0,100],reverse:!0},marks:[N(10,"risk_gradient"),u.Me({ticks:[]}),u.JA([{min:0,max:100}],{x1:"min",x2:"max",y1:0,y2:10,fill:"url(#risk_gradient)",fillOpacity:.7,stroke:"black",strokeWidth:1}),p?u.VD([p],{x1:"lower",x2:"upper",y:5,marker:"tick",stroke:g.indigo800,strokeOpacity:.7,strokeWidth:2}):null,l?u.zD([{score:l}],{x:"score",stroke:g.indigo600,marker:"circle-stroke",strokeWidth:3,fill:g.indigo600}):null]});return null==o||null===(e=o.current)||void 0===e||e.replaceChildren(c),()=>c.remove()},[l,r,a]),(0,s.jsx)("div",{ref:o,children:(0,s.jsx)(_,{width:500,height:150})})}var A=JSON.parse('{"FO":{"intercept":-10.32498577197637,"coefs":{"attention":0.32488943647638785,"memory":0.38489972502392367,"fluency":0.6649399088480656,"language":0.8122292594499009,"visuospatial":0.27262320144200186}},"gy":[[1.1198148056383341,-0.04667157889023354,-0.029050628130672468,-0.03154225255108559,-0.1190583591997873,-0.029332239835712218],[-0.04667157889023354,0.01990916962066307,-0.0018505615413595914,-0.0003122597422042938,0.0013568544291487523,-0.004227463027503619],[-0.029050628130672468,-0.0018505615413595914,0.0051743515623118045,0.00037707762389274115,-0.0002226042259692137,-0.00009327160777052855],[-0.03154225255108559,-0.0003122597422042938,0.00037707762389274115,0.010118577556215019,-0.0008425351174451155,-0.0019587136699196254],[-0.1190583591997873,0.0013568544291487523,-0.0002226042259692137,-0.0008425351174451155,0.025285453489057252,-0.00045303533243386105],[-0.029332239835712218,-0.004227463027503619,-0.00009327160777052855,-0.0019587136699196254,-0.00045303533243386105,0.02528815793412658]],"qh":{"attention":13.74361088,"memory":16.7830033,"fluency":6.91990091,"language":20.02885408,"visuospatial":13.13685078}}'),V=JSON.parse('{"F":{"intercept":-10.005545737961713,"coefs":{"total":0.5017392185937919}},"q":{"total":70.82303370786514}}'),F=r(10426),E=r(4810),O=r(47672),S=r(10735),q=r(16205),D=r(20205),R=r(3507),I=r.n(R);let P=(0,F.U)({matrixDependencies:E.Q,multiplyDependencies:O._,sqrtDependencies:S.E,transposeDependencies:q.p});class C{has_vcov(){return void 0!==this.vcov}has_means(){return void 0!==this.predictor_means}get_centered_data(e){if(!this.has_means())throw Error("You must provide predictor_means in the options to center data");return Object.fromEntries(this.predictors.map(o=>{let r=e[o]-this.predictor_means[o];return[o,r]}))}linear_prediction(e){let o=this.center_predictors?this.get_centered_data(e):e;return this.coefs.intercept+this.predictors.reduce((e,r)=>e+this.coefs.coefs[r]*o[r],0)}predict(e){return W(this.linear_prediction(e))}confidence_interval(e){var o;let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.95;if(!this.has_vcov())throw Error("You must provide vcov (the variance-covariance matrix) to calculate confidence intervals");let s=this.center_predictors?this.get_centered_data(e):e,a=(o=1-(1-r)/2,Math.sqrt(2)*I()(2*o-1)),l=(0,D.pIu)([1,...Object.values(s)]),p=P.multiply(P.multiply(l,this.vcov),P.transpose(l)),c=P.sqrt(p),t=this.linear_prediction(e);return[W(t-c*a),W(t+c*a)]}constructor(e,o){this.predictors=Object.keys(e.coefs),this.coefs=e,this.vcov=(null==o?void 0:o.vcov)?P.matrix(o.vcov):void 0,this.center_predictors=(null==o?void 0:o.center_predictors)||!1,this.predictor_means=(null==o?void 0:o.predictor_means)||void 0}}function W(e){return 1/(1+Math.exp(-1*e))}let z=new C(A.FO,{vcov:A.gy,predictor_means:A.qh,center_predictors:!0}),J=new C(V.F,{predictor_means:V.q,center_predictors:!0});function Y(e){let o=(0,i.useRef)(null),r=e.scores,a=n.map(e=>({scale:c[e].label,score:r[e]?r[e]:0,max:c[e].max}));return(0,i.useEffect)(()=>{var e;let r=u.g({width:500,height:500,title:"Subdomain scores",y:{label:"Score",domain:[0,27]},x:{domain:n.map(e=>c[e].label),padding:.2},color:{type:"categorical",scheme:"Tableau10"},marks:[u.lU({label:null}),u.we(a,{y:"max",x:"scale",fill:"scale",opacity:.3,inset:-5,insetBottom:0}),u.we(a,{y:"score",fill:"scale",x:"scale",opacity:.8,stroke:"black"})]});return null==o||null===(e=o.current)||void 0===e||e.replaceChildren(r),()=>r.remove()},[a]),(0,s.jsx)("div",{ref:o,children:(0,s.jsx)(_,{width:500,height:500})})}var Z=JSON.parse('{"M8":{"attention":17.352678571428573,"memory":24.830357142857142,"fluency":12.348214285714286,"language":25.46875,"visuospatial":15.589285714285714,"total":95.58928571428571},"Gl":{"attention":0.9637799110005221,"memory":1.5026935030982451,"fluency":1.5105596707505928,"language":0.808534216020161,"visuospatial":0.7403013739547601,"total":3.3228481257620257},"cZ":{"attention":12.5,"memory":16.5,"fluency":7.5,"language":20.5,"visuospatial":11.5,"total":83.5}}'),G=JSON.parse('{"Y":[{"scale":"Attention","score":0,"prop":0.71,"prop_scaled":0.06},{"scale":"Attention","score":1,"prop":0.36,"prop_scaled":0.03},{"scale":"Attention","score":2,"prop":0.59,"prop_scaled":0.05},{"scale":"Attention","score":3,"prop":0.95,"prop_scaled":0.08},{"scale":"Attention","score":4,"prop":1.54,"prop_scaled":0.13},{"scale":"Attention","score":5,"prop":2.37,"prop_scaled":0.2},{"scale":"Attention","score":6,"prop":3.55,"prop_scaled":0.3},{"scale":"Attention","score":7,"prop":3.79,"prop_scaled":0.32},{"scale":"Attention","score":8,"prop":4.15,"prop_scaled":0.35},{"scale":"Attention","score":9,"prop":4.38,"prop_scaled":0.37},{"scale":"Attention","score":10,"prop":3.91,"prop_scaled":0.33},{"scale":"Attention","score":11,"prop":5.45,"prop_scaled":0.46},{"scale":"Attention","score":12,"prop":6.04,"prop_scaled":0.51},{"scale":"Attention","score":13,"prop":8.41,"prop_scaled":0.71},{"scale":"Attention","score":14,"prop":9.83,"prop_scaled":0.83},{"scale":"Attention","score":15,"prop":11.85,"prop_scaled":1},{"scale":"Attention","score":16,"prop":10.66,"prop_scaled":0.9},{"scale":"Attention","score":17,"prop":11.02,"prop_scaled":0.93},{"scale":"Attention","score":18,"prop":10.43,"prop_scaled":0.88},{"scale":"Fluency","score":0,"prop":7.94,"prop_scaled":0.71},{"scale":"Fluency","score":1,"prop":9.12,"prop_scaled":0.81},{"scale":"Fluency","score":2,"prop":7.58,"prop_scaled":0.67},{"scale":"Fluency","score":3,"prop":8.29,"prop_scaled":0.74},{"scale":"Fluency","score":4,"prop":8.53,"prop_scaled":0.76},{"scale":"Fluency","score":5,"prop":7.11,"prop_scaled":0.63},{"scale":"Fluency","score":6,"prop":7.35,"prop_scaled":0.65},{"scale":"Fluency","score":7,"prop":11.26,"prop_scaled":1},{"scale":"Fluency","score":8,"prop":8.53,"prop_scaled":0.76},{"scale":"Fluency","score":9,"prop":9.24,"prop_scaled":0.82},{"scale":"Fluency","score":10,"prop":6.4,"prop_scaled":0.57},{"scale":"Fluency","score":11,"prop":5.57,"prop_scaled":0.49},{"scale":"Fluency","score":12,"prop":1.78,"prop_scaled":0.16},{"scale":"Fluency","score":13,"prop":0.95,"prop_scaled":0.08},{"scale":"Fluency","score":14,"prop":0.36,"prop_scaled":0.03},{"scale":"Language","score":0,"prop":0.36,"prop_scaled":0.04},{"scale":"Language","score":1,"prop":0.47,"prop_scaled":0.05},{"scale":"Language","score":2,"prop":0.95,"prop_scaled":0.1},{"scale":"Language","score":3,"prop":0.24,"prop_scaled":0.02},{"scale":"Language","score":4,"prop":0.59,"prop_scaled":0.06},{"scale":"Language","score":5,"prop":0.59,"prop_scaled":0.06},{"scale":"Language","score":6,"prop":1.42,"prop_scaled":0.14},{"scale":"Language","score":7,"prop":1.54,"prop_scaled":0.16},{"scale":"Language","score":8,"prop":1.66,"prop_scaled":0.17},{"scale":"Language","score":9,"prop":2.73,"prop_scaled":0.28},{"scale":"Language","score":10,"prop":1.66,"prop_scaled":0.17},{"scale":"Language","score":11,"prop":2.73,"prop_scaled":0.28},{"scale":"Language","score":12,"prop":2.96,"prop_scaled":0.3},{"scale":"Language","score":13,"prop":2.96,"prop_scaled":0.3},{"scale":"Language","score":14,"prop":3.2,"prop_scaled":0.33},{"scale":"Language","score":15,"prop":3.32,"prop_scaled":0.34},{"scale":"Language","score":16,"prop":3.32,"prop_scaled":0.34},{"scale":"Language","score":17,"prop":3.32,"prop_scaled":0.34},{"scale":"Language","score":18,"prop":4.5,"prop_scaled":0.46},{"scale":"Language","score":19,"prop":6.75,"prop_scaled":0.69},{"scale":"Language","score":20,"prop":6.52,"prop_scaled":0.66},{"scale":"Language","score":21,"prop":7.58,"prop_scaled":0.77},{"scale":"Language","score":22,"prop":8.65,"prop_scaled":0.88},{"scale":"Language","score":23,"prop":8.41,"prop_scaled":0.86},{"scale":"Language","score":24,"prop":8.41,"prop_scaled":0.86},{"scale":"Language","score":25,"prop":9.83,"prop_scaled":1},{"scale":"Language","score":26,"prop":5.33,"prop_scaled":0.54},{"scale":"Memory","score":0,"prop":1.18,"prop_scaled":0.21},{"scale":"Memory","score":1,"prop":0.59,"prop_scaled":0.1},{"scale":"Memory","score":2,"prop":1.07,"prop_scaled":0.19},{"scale":"Memory","score":3,"prop":1.3,"prop_scaled":0.23},{"scale":"Memory","score":4,"prop":3.2,"prop_scaled":0.56},{"scale":"Memory","score":5,"prop":2.73,"prop_scaled":0.48},{"scale":"Memory","score":6,"prop":4.15,"prop_scaled":0.73},{"scale":"Memory","score":7,"prop":3.55,"prop_scaled":0.62},{"scale":"Memory","score":8,"prop":3.32,"prop_scaled":0.58},{"scale":"Memory","score":9,"prop":4.27,"prop_scaled":0.75},{"scale":"Memory","score":10,"prop":4.5,"prop_scaled":0.79},{"scale":"Memory","score":11,"prop":4.5,"prop_scaled":0.79},{"scale":"Memory","score":12,"prop":4.62,"prop_scaled":0.81},{"scale":"Memory","score":13,"prop":3.67,"prop_scaled":0.65},{"scale":"Memory","score":14,"prop":5.57,"prop_scaled":0.98},{"scale":"Memory","score":15,"prop":4.15,"prop_scaled":0.73},{"scale":"Memory","score":16,"prop":4.98,"prop_scaled":0.88},{"scale":"Memory","score":17,"prop":5.33,"prop_scaled":0.94},{"scale":"Memory","score":18,"prop":4.03,"prop_scaled":0.71},{"scale":"Memory","score":19,"prop":4.62,"prop_scaled":0.81},{"scale":"Memory","score":20,"prop":4.38,"prop_scaled":0.77},{"scale":"Memory","score":21,"prop":3.91,"prop_scaled":0.69},{"scale":"Memory","score":22,"prop":4.03,"prop_scaled":0.71},{"scale":"Memory","score":23,"prop":5.69,"prop_scaled":1},{"scale":"Memory","score":24,"prop":2.96,"prop_scaled":0.52},{"scale":"Memory","score":25,"prop":4.5,"prop_scaled":0.79},{"scale":"Memory","score":26,"prop":3.2,"prop_scaled":0.56},{"scale":"Total","score":4,"prop":0.12,"prop_scaled":0.04},{"scale":"Total","score":5,"prop":0.12,"prop_scaled":0.04},{"scale":"Total","score":6,"prop":0.12,"prop_scaled":0.04},{"scale":"Total","score":7,"prop":0.12,"prop_scaled":0.04},{"scale":"Total","score":9,"prop":0.24,"prop_scaled":0.07},{"scale":"Total","score":10,"prop":0.36,"prop_scaled":0.11},{"scale":"Total","score":12,"prop":0.24,"prop_scaled":0.07},{"scale":"Total","score":13,"prop":0.12,"prop_scaled":0.04},{"scale":"Total","score":14,"prop":0.12,"prop_scaled":0.04},{"scale":"Total","score":15,"prop":0.24,"prop_scaled":0.07},{"scale":"Total","score":16,"prop":0.24,"prop_scaled":0.07},{"scale":"Total","score":17,"prop":0.12,"prop_scaled":0.04},{"scale":"Total","score":18,"prop":0.12,"prop_scaled":0.04},{"scale":"Total","score":19,"prop":0.36,"prop_scaled":0.11},{"scale":"Total","score":20,"prop":0.24,"prop_scaled":0.07},{"scale":"Total","score":21,"prop":0.12,"prop_scaled":0.04},{"scale":"Total","score":22,"prop":0.12,"prop_scaled":0.04},{"scale":"Total","score":23,"prop":0.95,"prop_scaled":0.3},{"scale":"Total","score":24,"prop":0.36,"prop_scaled":0.11},{"scale":"Total","score":25,"prop":0.12,"prop_scaled":0.04},{"scale":"Total","score":26,"prop":0.36,"prop_scaled":0.11},{"scale":"Total","score":27,"prop":0.47,"prop_scaled":0.15},{"scale":"Total","score":28,"prop":0.24,"prop_scaled":0.07},{"scale":"Total","score":29,"prop":0.47,"prop_scaled":0.15},{"scale":"Total","score":30,"prop":0.47,"prop_scaled":0.15},{"scale":"Total","score":31,"prop":0.47,"prop_scaled":0.15},{"scale":"Total","score":32,"prop":0.24,"prop_scaled":0.07},{"scale":"Total","score":33,"prop":0.95,"prop_scaled":0.3},{"scale":"Total","score":34,"prop":1.07,"prop_scaled":0.33},{"scale":"Total","score":35,"prop":0.71,"prop_scaled":0.22},{"scale":"Total","score":36,"prop":0.59,"prop_scaled":0.19},{"scale":"Total","score":37,"prop":0.95,"prop_scaled":0.3},{"scale":"Total","score":38,"prop":0.71,"prop_scaled":0.22},{"scale":"Total","score":39,"prop":0.71,"prop_scaled":0.22},{"scale":"Total","score":40,"prop":0.95,"prop_scaled":0.3},{"scale":"Total","score":41,"prop":0.24,"prop_scaled":0.07},{"scale":"Total","score":42,"prop":0.95,"prop_scaled":0.3},{"scale":"Total","score":43,"prop":0.83,"prop_scaled":0.26},{"scale":"Total","score":44,"prop":1.3,"prop_scaled":0.41},{"scale":"Total","score":45,"prop":0.95,"prop_scaled":0.3},{"scale":"Total","score":46,"prop":1.3,"prop_scaled":0.41},{"scale":"Total","score":47,"prop":0.59,"prop_scaled":0.19},{"scale":"Total","score":48,"prop":1.18,"prop_scaled":0.37},{"scale":"Total","score":49,"prop":0.71,"prop_scaled":0.22},{"scale":"Total","score":50,"prop":0.95,"prop_scaled":0.3},{"scale":"Total","score":51,"prop":1.18,"prop_scaled":0.37},{"scale":"Total","score":52,"prop":1.54,"prop_scaled":0.48},{"scale":"Total","score":53,"prop":1.07,"prop_scaled":0.33},{"scale":"Total","score":54,"prop":1.07,"prop_scaled":0.33},{"scale":"Total","score":55,"prop":1.3,"prop_scaled":0.41},{"scale":"Total","score":56,"prop":1.07,"prop_scaled":0.33},{"scale":"Total","score":57,"prop":1.66,"prop_scaled":0.52},{"scale":"Total","score":58,"prop":1.42,"prop_scaled":0.44},{"scale":"Total","score":59,"prop":1.07,"prop_scaled":0.33},{"scale":"Total","score":60,"prop":1.9,"prop_scaled":0.59},{"scale":"Total","score":61,"prop":1.66,"prop_scaled":0.52},{"scale":"Total","score":62,"prop":1.42,"prop_scaled":0.44},{"scale":"Total","score":63,"prop":1.07,"prop_scaled":0.33},{"scale":"Total","score":64,"prop":1.42,"prop_scaled":0.44},{"scale":"Total","score":65,"prop":2.01,"prop_scaled":0.63},{"scale":"Total","score":66,"prop":2.01,"prop_scaled":0.63},{"scale":"Total","score":67,"prop":2.01,"prop_scaled":0.63},{"scale":"Total","score":68,"prop":1.54,"prop_scaled":0.48},{"scale":"Total","score":69,"prop":2.25,"prop_scaled":0.7},{"scale":"Total","score":70,"prop":2.49,"prop_scaled":0.78},{"scale":"Total","score":71,"prop":1.9,"prop_scaled":0.59},{"scale":"Total","score":72,"prop":2.13,"prop_scaled":0.67},{"scale":"Total","score":73,"prop":2.37,"prop_scaled":0.74},{"scale":"Total","score":74,"prop":2.73,"prop_scaled":0.85},{"scale":"Total","score":75,"prop":2.84,"prop_scaled":0.89},{"scale":"Total","score":76,"prop":3.08,"prop_scaled":0.96},{"scale":"Total","score":77,"prop":2.37,"prop_scaled":0.74},{"scale":"Total","score":78,"prop":2.25,"prop_scaled":0.7},{"scale":"Total","score":79,"prop":2.49,"prop_scaled":0.78},{"scale":"Total","score":80,"prop":3.2,"prop_scaled":1},{"scale":"Total","score":81,"prop":2.01,"prop_scaled":0.63},{"scale":"Total","score":82,"prop":2.84,"prop_scaled":0.89},{"scale":"Total","score":83,"prop":2.25,"prop_scaled":0.7},{"scale":"Total","score":84,"prop":1.9,"prop_scaled":0.59},{"scale":"Total","score":85,"prop":1.3,"prop_scaled":0.41},{"scale":"Total","score":86,"prop":2.01,"prop_scaled":0.63},{"scale":"Total","score":87,"prop":1.78,"prop_scaled":0.56},{"scale":"Total","score":88,"prop":0.95,"prop_scaled":0.3},{"scale":"Total","score":89,"prop":0.83,"prop_scaled":0.26},{"scale":"Total","score":90,"prop":1.3,"prop_scaled":0.41},{"scale":"Total","score":91,"prop":0.59,"prop_scaled":0.19},{"scale":"Total","score":92,"prop":1.18,"prop_scaled":0.37},{"scale":"Total","score":93,"prop":0.47,"prop_scaled":0.15},{"scale":"Total","score":94,"prop":0.24,"prop_scaled":0.07},{"scale":"Total","score":95,"prop":0.36,"prop_scaled":0.11},{"scale":"Total","score":96,"prop":0.36,"prop_scaled":0.11},{"scale":"Total","score":97,"prop":0.12,"prop_scaled":0.04},{"scale":"Total","score":98,"prop":0.12,"prop_scaled":0.04},{"scale":"Visuospatial","score":0,"prop":0.12,"prop_scaled":0.01},{"scale":"Visuospatial","score":1,"prop":0.71,"prop_scaled":0.03},{"scale":"Visuospatial","score":2,"prop":0.83,"prop_scaled":0.04},{"scale":"Visuospatial","score":3,"prop":0.47,"prop_scaled":0.02},{"scale":"Visuospatial","score":4,"prop":1.9,"prop_scaled":0.09},{"scale":"Visuospatial","score":5,"prop":1.78,"prop_scaled":0.08},{"scale":"Visuospatial","score":6,"prop":1.78,"prop_scaled":0.08},{"scale":"Visuospatial","score":7,"prop":2.01,"prop_scaled":0.09},{"scale":"Visuospatial","score":8,"prop":4.5,"prop_scaled":0.21},{"scale":"Visuospatial","score":9,"prop":5.21,"prop_scaled":0.24},{"scale":"Visuospatial","score":10,"prop":4.86,"prop_scaled":0.22},{"scale":"Visuospatial","score":11,"prop":7.35,"prop_scaled":0.34},{"scale":"Visuospatial","score":12,"prop":8.53,"prop_scaled":0.39},{"scale":"Visuospatial","score":13,"prop":8.18,"prop_scaled":0.37},{"scale":"Visuospatial","score":14,"prop":12.91,"prop_scaled":0.59},{"scale":"Visuospatial","score":15,"prop":16.94,"prop_scaled":0.77},{"scale":"Visuospatial","score":16,"prop":21.92,"prop_scaled":1}],"$":[{"scale":"Attention","score":13,"prop":0.45,"prop_scaled":0.01},{"scale":"Attention","score":14,"prop":2.23,"prop_scaled":0.04},{"scale":"Attention","score":15,"prop":2.68,"prop_scaled":0.05},{"scale":"Attention","score":16,"prop":8.93,"prop_scaled":0.15},{"scale":"Attention","score":17,"prop":27.68,"prop_scaled":0.48},{"scale":"Attention","score":18,"prop":58.04,"prop_scaled":1},{"scale":"Fluency","score":8,"prop":1.34,"prop_scaled":0.05},{"scale":"Fluency","score":9,"prop":5.36,"prop_scaled":0.2},{"scale":"Fluency","score":10,"prop":6.25,"prop_scaled":0.23},{"scale":"Fluency","score":11,"prop":11.16,"prop_scaled":0.42},{"scale":"Fluency","score":12,"prop":22.77,"prop_scaled":0.85},{"scale":"Fluency","score":13,"prop":26.34,"prop_scaled":0.98},{"scale":"Fluency","score":14,"prop":26.79,"prop_scaled":1},{"scale":"Language","score":21,"prop":0.45,"prop_scaled":0.01},{"scale":"Language","score":23,"prop":1.79,"prop_scaled":0.03},{"scale":"Language","score":24,"prop":10.27,"prop_scaled":0.16},{"scale":"Language","score":25,"prop":25,"prop_scaled":0.4},{"scale":"Language","score":26,"prop":62.5,"prop_scaled":1},{"scale":"Memory","score":17,"prop":0.45,"prop_scaled":0.01},{"scale":"Memory","score":19,"prop":0.45,"prop_scaled":0.01},{"scale":"Memory","score":20,"prop":0.89,"prop_scaled":0.02},{"scale":"Memory","score":21,"prop":3.12,"prop_scaled":0.07},{"scale":"Memory","score":22,"prop":2.23,"prop_scaled":0.05},{"scale":"Memory","score":23,"prop":8.48,"prop_scaled":0.2},{"scale":"Memory","score":24,"prop":13.39,"prop_scaled":0.31},{"scale":"Memory","score":25,"prop":27.68,"prop_scaled":0.64},{"scale":"Memory","score":26,"prop":43.3,"prop_scaled":1},{"scale":"Total","score":84,"prop":0.45,"prop_scaled":0.02},{"scale":"Total","score":85,"prop":0.45,"prop_scaled":0.02},{"scale":"Total","score":86,"prop":1.34,"prop_scaled":0.07},{"scale":"Total","score":87,"prop":0.89,"prop_scaled":0.05},{"scale":"Total","score":88,"prop":0.89,"prop_scaled":0.05},{"scale":"Total","score":89,"prop":1.79,"prop_scaled":0.1},{"scale":"Total","score":90,"prop":2.68,"prop_scaled":0.15},{"scale":"Total","score":91,"prop":4.02,"prop_scaled":0.22},{"scale":"Total","score":92,"prop":3.57,"prop_scaled":0.2},{"scale":"Total","score":93,"prop":4.91,"prop_scaled":0.27},{"scale":"Total","score":94,"prop":11.16,"prop_scaled":0.61},{"scale":"Total","score":95,"prop":9.82,"prop_scaled":0.54},{"scale":"Total","score":96,"prop":10.71,"prop_scaled":0.59},{"scale":"Total","score":97,"prop":12.05,"prop_scaled":0.66},{"scale":"Total","score":98,"prop":18.3,"prop_scaled":1},{"scale":"Total","score":99,"prop":8.93,"prop_scaled":0.49},{"scale":"Total","score":100,"prop":8.04,"prop_scaled":0.44},{"scale":"Visuospatial","score":12,"prop":0.45,"prop_scaled":0.01},{"scale":"Visuospatial","score":13,"prop":2.68,"prop_scaled":0.04},{"scale":"Visuospatial","score":14,"prop":4.46,"prop_scaled":0.06},{"scale":"Visuospatial","score":15,"prop":22.32,"prop_scaled":0.32},{"scale":"Visuospatial","score":16,"prop":70.09,"prop_scaled":1}]}');let Q=[...n,"total"],U={...c,total:{max:100,label:"Total"}},B=(e,o)=>e/U[o].max*100;function X(e){let o=(0,i.useRef)(null),{model:r}=e,{scores:a}=b(e.scores),{total:l}=m(e.scores),p=a?{...a,total:l}:void 0,t=a?1-r.predict(a):void 0,d=Q.map(e=>({scale:U[e].label,height:100})),h=Q.map(e=>{let o=Z.M8[e],r=Z.Gl[e];return{scale:U[e].label,value:B(o-2*r,e)}}),x=Q.map(e=>{let o=Z.cZ[e];return{scale:U[e].label,value:B(o,e)}}),f=Q.map(e=>{let o=p?p[e]:void 0,r=o?B(o,e):void 0;return{scale:U[e].label,value:r}});return(0,i.useEffect)(()=>{var e;let r=u.g({style:{fontSize:"10pt"},width:800,height:600,y:{label:"Score (% of maximum)",domain:[0,100]},x:{domain:[-1,1]},facet:{data:d,x:"scale",label:null},fx:{domain:[...n.map(e=>c[e].label),"Total"]},color:{type:"categorical",scheme:"Tableau10",domain:[...n.map(e=>c[e].label),"Total"]},marks:[u.Me({ticks:[],labelAnchor:"center",labelArrow:"none",fontSize:"12pt"}),u.lU({ticks:[],label:null}),u._Q(G.Y,{x:e=>-1*e.prop_scaled,fx:"scale",fill:"scale",fillOpacity:1,sort:"score",stroke:"black",y:e=>B(e.score,e.scale.toLowerCase())}),u._Q(G.$,{x:"prop_scaled",fx:"scale",fill:"scale",fillOpacity:.5,sort:"score",stroke:"black",y:e=>B(e.score,e.scale.toLowerCase())}),u.mc([0],{stroke:"black",strokeWidth:2}),u.rP(h,{fx:"scale",y:"value",stroke:g.orange500,strokeDasharray:"1,4",strokeLinecap:"round",strokeWidth:3}),u.rP(x,{fx:"scale",y:"value",stroke:g.red600,strokeDasharray:"4,4",strokeWidth:3}),a?u.rP(f,{fx:"scale",y:"value",strokeWidth:2,marker:"circle",stroke:g.indigo600}):null]});return null==o||null===(e=o.current)||void 0===e||e.replaceChildren(r),()=>r.remove()},[t,d,f,h,x,a]),(0,s.jsx)("div",{ref:o,children:(0,s.jsx)(_,{width:500,height:500})})}var $=e=>(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",...e,viewBox:"0 0 48 48",role:"img",children:(0,s.jsx)("path",{d:"M20.808 12.847.057 48.788h26.296l-.091.113h34.013L43.267 28.093l-8.003 9.793Z"})});function H(e){return(0,s.jsxs)("div",{...e,children:[(0,s.jsx)("h2",{className:"text-indigo-600 font-bold text-lg",children:"Subdomain scores"}),(0,s.jsxs)("p",{className:"text-gray-800",children:["This plot compares the current scores for each subdomain to scores from healthy controls. ",(0,s.jsx)("br",{}),"Scores are shown as a percentage of the maximum for each subdomain."]}),(0,s.jsx)("h3",{className:"text-lg text-indigo-800 font-bold mt-2",children:"Legend"}),(0,s.jsxs)(f.aV,{unstyled:!0,className:"my-1 space-y-3",children:[(0,s.jsxs)(f.aV.Item,{children:[(0,s.jsxs)("span",{className:"inline-flex items-center text-indigo-600 text-base p-1 border-2 me-2",children:["●",(0,s.jsx)("hr",{className:"w-4 h-1 bg-indigo-600"}),"●"]}),"Current score"]}),(0,s.jsxs)(f.aV.Item,{children:[(0,s.jsx)("span",{className:"text-orange-500  p-1 border-2 me-2",children:"\xb7\xb7\xb7\xb7\xb7\xb7\xb7"}),"2 SDs below the mean for control patients"]}),(0,s.jsxs)(f.aV.Item,{children:[(0,s.jsx)("span",{className:"text-red-600 font-bold p-1 border-2 me-2",children:"- - - -"}),"100% specificity for detecting dementia in our sample"]}),(0,s.jsxs)(f.aV.Item,{children:[(0,s.jsx)("div",{className:"inline p-1 py-2 border-2 me-2",children:(0,s.jsx)($,{height:32,width:32,className:"inline text-red-500 fill-current stroke-black stroke-2  -rotate-90 align-middle"})}),"Distribution in patients with dementia"]}),(0,s.jsxs)(f.aV.Item,{children:[(0,s.jsx)("span",{className:"p-1 py-2 border-2 me-2",children:(0,s.jsx)($,{height:32,width:32,className:"inline text-red-500 opacity-50 fill-current stroke-black stroke-2 rotate-90"})}),"Distribution in control patients"]})]})]})}function K(e){let{scores:o,model:r,...a}=e;return(0,s.jsx)(f.Zb,{...a,children:(0,s.jsxs)("div",{className:"flex flex-col lg:flex-row",children:[(0,s.jsx)("div",{className:"lg:basis-1/2",children:(0,s.jsx)(X,{scores:o,model:r})}),(0,s.jsx)(H,{id:"swarm-legend",className:"lg:basis-1/2 text-base max-w-prose"})]})})}function ee(e){let o=(0,i.useRef)(null),{model:r}=e,{valid:a,total:l}=m(e.scores),p=a?(1-r.predict({total:l}))*100:void 0;return(0,i.useEffect)(()=>{var e;let r=u.g({title:p?"Predicted risk of dementia (total score model): ".concat(Math.round(p),"%"):"Predicted risk of dementia (total score model)",width:500,height:150,x:{grid:!0,label:"Risk (%)",reverse:!0},color:{type:"sequential",scheme:"magma",domain:[0,100],reverse:!0},marks:[N(10,"total_risk_gradient"),u.Me({ticks:[]}),u.JA([{min:0,max:100}],{x1:"min",x2:"max",y1:0,y2:10,fill:"url(#total_risk_gradient)",fillOpacity:.7,stroke:"black",strokeWidth:1}),p?u.zD([{score:p}],{x:"score",stroke:g.indigo600,marker:"circle-stroke",strokeWidth:3,fill:g.indigo600}):null]});return null==o||null===(e=o.current)||void 0===e||e.replaceChildren(r),()=>r.remove()},[p,r,a,l]),(0,s.jsx)("div",{ref:o,children:(0,s.jsx)(_,{width:500,height:150})})}let eo={root:{base:"flex rounded-lg border border-gray-200 bg-white shadow-md dark:border-gray-700 dark:bg-gray-800",children:"flex h-full flex-col justify-center gap-4 p-2 md:p-6",horizontal:{off:"flex-col",on:"flex-col md:max-w-xl md:flex-row"},href:"hover:bg-gray-100 dark:hover:bg-gray-700"},img:{base:"",horizontal:{off:"rounded-t-lg",on:"h-96 w-full rounded-t-lg object-cover md:h-auto md:w-48 md:rounded-none md:rounded-l-lg"}}};function er(){let e=(0,a.cI)({mode:"all",defaultValues:d.getDefault(),resolver:(0,l.X)(d)}),{control:o,formState:r}=e,{errors:p}=r,c=(0,a.qo)({control:o});return(0,s.jsxs)("div",{id:"ace-form",className:"flex flex-col lg:flex-row lg:flex-wrap gap-2 md:gap-4 ",children:[(0,s.jsx)(v,{form:e}),(0,s.jsx)(f.Zb,{id:"risk-plots",className:"max-w-xl",children:(0,s.jsxs)("div",{className:"flex flex-col justify-start space-y-4",children:[(0,s.jsx)(x,{scores:c}),(0,s.jsx)(L,{scores:c,model:z}),(0,s.jsx)(ee,{scores:c,model:J})]})}),(0,s.jsx)(f.Zb,{id:"data-display-simple",className:"flex-col max-w-xl space-y-4 min-w-96",theme:eo,children:(0,s.jsx)(Y,{scores:c})}),(0,s.jsx)(K,{id:"swarm-plots",className:"max-w-full",scores:c,model:z})]})}}},function(e){e.O(0,[431,188,156,459,949,547,262,418,453,349,744],function(){return e(e.s=47464)}),_N_E=e.O()}]);