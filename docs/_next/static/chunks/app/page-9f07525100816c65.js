(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{21440:function(){},80162:function(e,r,t){Promise.resolve().then(t.bind(t,17720))},17720:function(e,r,t){"use strict";t.d(r,{default:function(){return ee}});var l=t(20795),a=t(62334),s=t(38123),i=t(68951);let n={attention:{max:18,label:"Attention"},memory:{max:26,label:"Memory"},fluency:{max:14,label:"Fluency"},language:{max:26,label:"Language"},visuospatial:{max:16,label:"Visuospatial"}},o=e=>"The score for ".concat(e.label," should be less than ").concat(e.max),c=(0,i.Ry)({attention:(0,i.Rx)().label(n.attention.label).integer().min(0).max(n.attention.max,o).typeError("Please enter a number").required(),memory:(0,i.Rx)().label(n.memory.label).integer().min(0).max(n.memory.max,o).typeError("Please enter a number").required(),fluency:(0,i.Rx)().label(n.fluency.label).integer().min(0).max(n.fluency.max,o).typeError("Please enter a number").required(),language:(0,i.Rx)().label(n.language.label).integer().min(0).max(n.language.max,o).typeError("Please enter a number").required(),visuospatial:(0,i.Rx)().label(n.visuospatial.label).integer().min(0).max(n.visuospatial.max,o).typeError("Please enter a number").required()}),d=["attention","memory","fluency","language","visuospatial"];var m=t(97819),u=t(80386);function h(e){let[r,t]=(0,m.useState)(!1),[l,a]=(0,m.useState)(0);return(0,m.useEffect)(()=>{c.validate(e).then(e=>{let r=Object.values(e).reduce((e,r)=>e+r,0);t(!0),a(r)}).catch(e=>{t(!1)})},[e]),{valid:r,total:l}}function x(e){let{width:r,height:t}=e;return(0,l.jsxs)("div",{role:"status",className:"w-".concat(r,"px h-").concat(t,"px p-4 animate-pulse md:p-6"),children:[(0,l.jsx)("div",{className:"h-2.5 bg-gray-200 rounded-full  w-1/2 mb-2.5"}),(0,l.jsx)("div",{className:"w-3/4 h-2 mb-10 bg-gray-200 rounded-full "}),(0,l.jsxs)("div",{className:"h-full flex items-baseline mt-4",children:[(0,l.jsx)("div",{className:"w-full bg-gray-200 rounded-t-lg h-3/4 "}),(0,l.jsx)("div",{className:"w-full h-1/2 ms-6 bg-gray-200 rounded-t-lg "}),(0,l.jsx)("div",{className:"w-full bg-gray-200 rounded-t-lg h-3/4 ms-6 "}),(0,l.jsx)("div",{className:"w-full h-4/5 ms-6 bg-gray-200 rounded-t-lg "}),(0,l.jsx)("div",{className:"w-full bg-gray-200 rounded-t-lg h-5/6 ms-6 "}),(0,l.jsx)("div",{className:"w-full bg-gray-200 rounded-t-lg h-3/4 ms-6 "}),(0,l.jsx)("div",{className:"w-full bg-gray-200 rounded-t-lg h-5/6 ms-6 "})]}),(0,l.jsx)("span",{className:"sr-only",children:"Loading..."})]})}let f=[{label:"High risk",min:0,max:60,width:60},{label:"Moderate risk",min:60,max:80,width:20},{label:"Low risk",min:80,max:100,width:20}];function g(e){let r=(0,m.useRef)(null),{scores:t}=e,{valid:a,total:s}=h(t);return(0,m.useEffect)(()=>{var e;let t=u.g({title:a?"Total score: ".concat(s):"Total score",width:500,height:150,x:{grid:!0,label:"ACE-III total score"},color:{type:"ordinal",scheme:"YlOrRd",domain:["Low risk","Moderate risk","High risk"],legend:!0},marks:[u.Me({ticks:[]}),u.JA(f,{x1:"min",x2:"max",y1:0,y2:10,fill:"label",opacity:.7}),a?u.zD([{score:s}],{x:"score",stroke:"black",marker:"circle",strokeWidth:2}):null]});return null==r||null===(e=r.current)||void 0===e||e.replaceChildren(t),()=>t.remove()},[a,s]),(0,l.jsx)("div",{ref:r,children:(0,l.jsx)(x,{width:500,height:150})})}var p=t(98451);function v(e){let{label:r,name:t,...s}=e,{register:i,getFieldState:n}=(0,a.Gc)(),o=n(t),c=o.isDirty?o.invalid?"failure":"success":void 0;return(0,l.jsxs)("div",{children:[(0,l.jsx)(p.__,{htmlFor:t,children:r}),(0,l.jsx)(p.oi,{type:"number",color:c,...i(t),...s}),o.error&&(0,l.jsx)("span",{className:"text-sm text-red-400",children:o.error.message})]})}function b(e){let{form:r}=e,{handleSubmit:t}=r;return(0,l.jsxs)(p.Zb,{className:"max-w-xl",id:"score-entry",children:[(0,l.jsx)("h2",{className:"text-2xl font-bold text-indigo-700",children:"Enter ACE-III scale scores"}),(0,l.jsx)(a.RV,{...r,children:(0,l.jsxs)("form",{className:"flex flex-col max-w-lg gap-4 my-2",onSubmit:t(e=>console.log(e)),children:[(0,l.jsx)(v,{label:"Attention",name:"attention"}),(0,l.jsx)(v,{label:"Memory",name:"memory"}),(0,l.jsx)(v,{label:"Fluency",name:"fluency"}),(0,l.jsx)(v,{label:"Language",name:"language"}),(0,l.jsx)(v,{label:"Visuospatial",name:"visuospatial"})]})})]})}function y(e){let[r,t]=(0,m.useState)(!1),[l,a]=(0,m.useState)(void 0);return(0,m.useEffect)(()=>{c.validate(e).then(e=>{t(!0),a(e)}).catch(e=>{t(!1)})},[e]),{valid:r,scores:l}}var j=t(97762),k=t(87738),w=t(19246);function _(){let e=(0,j._)(["<stop offset=",'% stop-color="','">']);return _=function(){return e},e}function N(){let e=(0,j._)(["<defs>\n          <linearGradient id=",">\n            ","\n          </linearGradient>\n        </defs>"]);return N=function(){return e},e}let E=function(e){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"gradient",t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:w.uX,l=100/e,a=[...Array(e+1).keys()].map(e=>e*l).map(e=>k.Y.fragment(_(),e,t(e/100)));return()=>(0,k.Y)(N(),"".concat(r),a)};function q(e){let r=(0,m.useRef)(null),{model:t}=e,{scores:a}=y(e.scores),s=a?(1-t.predict(a))*100:void 0;return(0,m.useEffect)(()=>{var e;let l=a?t.confidence_interval(a):void 0,i=void 0!==l?{upper:1-l[0],lower:1-l[1]}:void 0,n=u.g({title:s?"Predicted risk of dementia (subdomain model): ".concat(Math.round(s),"%"):"Predicted risk of dementia (subdomain model)",width:500,height:150,x:{grid:!0,label:"Risk (%)",domain:[0,100],reverse:!0},y:{domain:[0,10]},color:{type:"sequential",scheme:"magma",domain:[0,100],reverse:!0},marks:[E(10,"risk_gradient"),u.Me({ticks:[]}),u.JA([{min:0,max:100}],{x1:"min",x2:"max",y1:0,y2:10,fill:"url(#risk_gradient)",opacity:.7}),i?u.VD([i],{x1:"lower",x2:"upper",y:5,stroke:"#404040",strokeWidth:1}):null,s?u.zD([{score:s}],{x:"score",stroke:"black",marker:"circle",strokeWidth:2}):null]});return null==r||null===(e=r.current)||void 0===e||e.replaceChildren(n),()=>n.remove()},[s,t,a]),(0,l.jsx)("div",{ref:r,children:(0,l.jsx)(x,{width:500,height:150})})}var R=JSON.parse('{"FO":{"intercept":-10.32498577197637,"coefs":{"attention":0.32488943647638785,"memory":0.38489972502392367,"fluency":0.6649399088480656,"language":0.8122292594499009,"visuospatial":0.27262320144200186}},"gy":[[1.1198148056383341,-0.04667157889023354,-0.029050628130672468,-0.03154225255108559,-0.1190583591997873,-0.029332239835712218],[-0.04667157889023354,0.01990916962066307,-0.0018505615413595914,-0.0003122597422042938,0.0013568544291487523,-0.004227463027503619],[-0.029050628130672468,-0.0018505615413595914,0.0051743515623118045,0.00037707762389274115,-0.0002226042259692137,-0.00009327160777052855],[-0.03154225255108559,-0.0003122597422042938,0.00037707762389274115,0.010118577556215019,-0.0008425351174451155,-0.0019587136699196254],[-0.1190583591997873,0.0013568544291487523,-0.0002226042259692137,-0.0008425351174451155,0.025285453489057252,-0.00045303533243386105],[-0.029332239835712218,-0.004227463027503619,-0.00009327160777052855,-0.0019587136699196254,-0.00045303533243386105,0.02528815793412658]],"qh":{"attention":13.74361088,"memory":16.7830033,"fluency":6.91990091,"language":20.02885408,"visuospatial":13.13685078}}'),M=JSON.parse('{"F":{"intercept":-10.005545737961713,"coefs":{"total":0.5017392185937919}},"q":{"total":70.82303370786514}}'),O=t(1560),S=t(73317),D=t(41180),P=t(41940),I=t(85772),A=t(13338),C=t(26868),T=t.n(C);let V=(0,O.U)({matrixDependencies:S.Q,multiplyDependencies:D._,sqrtDependencies:P.E,transposeDependencies:I.p});class W{has_vcov(){return void 0!==this.vcov}has_means(){return void 0!==this.predictor_means}get_centered_data(e){if(!this.has_means())throw Error("You must provide predictor_means in the options to center data");return Object.fromEntries(this.predictors.map(r=>{let t=e[r]-this.predictor_means[r];return[r,t]}))}linear_prediction(e){let r=this.center_predictors?this.get_centered_data(e):e;return this.coefs.intercept+this.predictors.reduce((e,t)=>e+this.coefs.coefs[t]*r[t],0)}predict(e){return F(this.linear_prediction(e))}confidence_interval(e){var r;let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.95;if(!this.has_vcov())throw Error("You must provide vcov (the variance-covariance matrix) to calculate confidence intervals");let l=this.center_predictors?this.get_centered_data(e):e,a=(r=1-(1-t)/2,Math.sqrt(2)*T()(2*r-1)),s=(0,A.pIu)([1,...Object.values(l)]),i=V.multiply(V.multiply(s,this.vcov),V.transpose(s)),n=V.sqrt(i),o=this.linear_prediction(e);return[F(o-n*a),F(o+n*a)]}constructor(e,r){this.predictors=Object.keys(e.coefs),this.coefs=e,this.vcov=(null==r?void 0:r.vcov)?V.matrix(r.vcov):void 0,this.center_predictors=(null==r?void 0:r.center_predictors)||!1,this.predictor_means=(null==r?void 0:r.predictor_means)||void 0}}function F(e){return 1/(1+Math.exp(-1*e))}let J=new W(R.FO,{vcov:R.gy,predictor_means:R.qh,center_predictors:!0}),L=new W(M.F,{predictor_means:M.q,center_predictors:!0});function Z(e){let r=(0,m.useRef)(null),t=e.scores,a=d.map(e=>({scale:n[e].label,score:t[e]?t[e]:0,max:n[e].max}));return(0,m.useEffect)(()=>{var e;let t=u.g({width:500,height:500,title:"Subdomain scores",y:{label:"Score",domain:[0,27]},x:{domain:d.map(e=>n[e].label),padding:.2},color:{type:"categorical",scheme:"Tableau10"},marks:[u.lU({label:null}),u.we(a,{y:"max",x:"scale",fill:"scale",opacity:.3,inset:-5,insetBottom:0}),u.we(a,{y:"score",fill:"scale",x:"scale",opacity:.8,stroke:"black"})]});return null==r||null===(e=r.current)||void 0===e||e.replaceChildren(t),()=>t.remove()},[a]),(0,l.jsx)("div",{ref:r,children:(0,l.jsx)(x,{width:500,height:500})})}var z=JSON.parse('{"M8":{"attention":17.352678571428573,"memory":24.830357142857142,"fluency":12.348214285714286,"language":25.46875,"visuospatial":15.589285714285714,"total":95.58928571428571},"Gl":{"attention":0.9637799110005221,"memory":1.5026935030982451,"fluency":1.5105596707505928,"language":0.808534216020161,"visuospatial":0.7403013739547601,"total":3.3228481257620257},"cZ":{"attention":12.5,"memory":16.5,"fluency":7.5,"language":20.5,"visuospatial":11.5,"total":83.5}}');let G={orange500:"#f97316",red500:"#ef4444",indigo600:"#4f46e5"},Y=[...d,"total"],H={...n,total:{max:100,label:"Total"}},U=(e,r)=>e/H[r].max*100;function X(e){let r=(0,m.useRef)(null),{model:t}=e,{scores:a}=y(e.scores),{total:s}=h(e.scores),i=a?{...a,total:s}:void 0,o=a?1-t.predict(a):void 0,c=Y.map(e=>({scale:H[e].label,height:100})),f=Y.map(e=>{let r=z.M8[e],t=z.Gl[e];return{scale:H[e].label,value:U(r-2*t,e)}}),g=Y.map(e=>{let r=z.cZ[e];return{scale:H[e].label,value:U(r,e)}}),p=Y.map(e=>{let r=i?i[e]:void 0,t=r?U(r,e):void 0;return{scale:H[e].label,value:t}});return(0,m.useEffect)(()=>{var e;let t=u.g({width:500,height:500,y:{label:"Score (% of maximum)",domain:[0,100]},facet:{data:c,x:"scale",label:null},fx:{domain:[...d.map(e=>n[e].label),"Total"]},color:{type:"categorical",scheme:"Tableau10",domain:[...d.map(e=>n[e].label),"Total"]},marks:[u.Me({ticks:[],labelAnchor:"center",labelArrow:"none"}),u.we(c,{y:"height",fill:"scale",fx:"scale",fillOpacity:.5,stroke:"black",strokeWidth:2,strokeOpacity:1}),u.rP(f,{fx:"scale",y:"value",stroke:G.orange500,strokeDasharray:"1,1",strokeWidth:2}),u.rP(g,{fx:"scale",y:"value",stroke:G.red500,strokeDasharray:"4,4",strokeWidth:2}),a?u.rP(p,{fx:"scale",y:"value",strokeWidth:2,marker:"circle",stroke:G.indigo600}):null]});return null==r||null===(e=r.current)||void 0===e||e.replaceChildren(t),()=>t.remove()},[o,c,p,f,g,a]),(0,l.jsx)("div",{ref:r,children:(0,l.jsx)(x,{width:500,height:500})})}function B(e){return(0,l.jsxs)("div",{...e,children:[(0,l.jsx)("h2",{className:"text-indigo-600 font-bold text-lg",children:"Subdomain scores"}),(0,l.jsxs)("p",{className:"text-gray-800",children:["This plot compares the current scores for each subdomain to scores from healthy controls. ",(0,l.jsx)("br",{}),"Scores are shown as a percentage of the maximum for each subdomain."]}),(0,l.jsx)("h3",{className:"text-lg text-indigo-800 font-bold mt-2",children:"Legend"}),(0,l.jsxs)(p.aV,{unstyled:!0,className:"my-1 space-y-3",children:[(0,l.jsxs)(p.aV.Item,{children:[(0,l.jsxs)("span",{className:"inline-flex items-center text-indigo-600 text-base p-1 border-2 me-2",children:["●",(0,l.jsx)("hr",{className:"w-4 h-1 bg-indigo-600"}),"●"]}),"Current score"]}),(0,l.jsxs)(p.aV.Item,{children:[(0,l.jsx)("span",{className:"text-orange-500 font-bold p-1 border-2 me-2",children:"\xb7\xb7\xb7\xb7\xb7\xb7\xb7"}),"2 SDs below the mean for control patients"]}),(0,l.jsxs)(p.aV.Item,{children:[(0,l.jsx)("span",{className:"text-red-500 font-bold p-1 border-2 me-2",children:"- - - -"}),"100% specificity for detecting dementia in our sample"]})]})]})}function Q(e){let{scores:r,model:t,...a}=e;return(0,l.jsx)(p.Zb,{...a,children:(0,l.jsxs)("div",{className:"flex flex-col lg:flex-row",children:[(0,l.jsx)("div",{className:"lg:basis-1/2",children:(0,l.jsx)(X,{scores:r,model:t})}),(0,l.jsx)(B,{id:"swarm-legend",className:"lg:basis-1/2 text-base max-w-prose"})]})})}function K(e){let r=(0,m.useRef)(null),{model:t}=e,{valid:a,total:s}=h(e.scores),i=a?(1-t.predict({total:s}))*100:void 0;return(0,m.useEffect)(()=>{var e;let t=u.g({title:i?"Predicted risk of dementia (total score model): ".concat(Math.round(i),"%"):"Predicted risk of dementia (total score model)",width:500,height:150,x:{grid:!0,label:"Risk (%)",reverse:!0},color:{type:"sequential",scheme:"magma",domain:[0,100],reverse:!0},marks:[E(10,"total_risk_gradient"),u.Me({ticks:[]}),u.JA([{min:0,max:100}],{x1:"min",x2:"max",y1:0,y2:10,fill:"url(#total_risk_gradient)",opacity:.7}),i?u.zD([{score:i}],{x:"score",stroke:"black",marker:"circle",strokeWidth:2}):null]});return null==r||null===(e=r.current)||void 0===e||e.replaceChildren(t),()=>t.remove()},[i,t,a,s]),(0,l.jsx)("div",{ref:r,children:(0,l.jsx)(x,{width:500,height:150})})}let $={root:{base:"flex rounded-lg border border-gray-200 bg-white shadow-md dark:border-gray-700 dark:bg-gray-800",children:"flex h-full flex-col justify-center gap-4 p-2 md:p-6",horizontal:{off:"flex-col",on:"flex-col md:max-w-xl md:flex-row"},href:"hover:bg-gray-100 dark:hover:bg-gray-700"},img:{base:"",horizontal:{off:"rounded-t-lg",on:"h-96 w-full rounded-t-lg object-cover md:h-auto md:w-48 md:rounded-none md:rounded-l-lg"}}};function ee(){let e=(0,a.cI)({mode:"all",defaultValues:c.getDefault(),resolver:(0,s.X)(c)}),{control:r,formState:t}=e,{errors:i}=t,n=(0,a.qo)({control:r});return(0,l.jsxs)("div",{id:"ace-form",className:"flex flex-col lg:flex-row lg:flex-wrap gap-2 md:gap-4 ",children:[(0,l.jsx)(b,{form:e}),(0,l.jsx)(p.Zb,{id:"risk-plots",className:"max-w-xl",children:(0,l.jsxs)("div",{className:"flex flex-col justify-start space-y-4",children:[(0,l.jsx)(g,{scores:n}),(0,l.jsx)(q,{scores:n,model:J}),(0,l.jsx)(K,{scores:n,model:L})]})}),(0,l.jsx)(p.Zb,{id:"data-display-simple",className:"flex-col max-w-xl space-y-4 min-w-96",theme:$,children:(0,l.jsx)(Z,{scores:n})}),(0,l.jsx)(Q,{id:"swarm-plots",className:"max-w-full",scores:n,model:J})]})}}},function(e){e.O(0,[431,188,156,459,949,236,451,305,274,346,744],function(){return e(e.s=80162)}),_N_E=e.O()}]);